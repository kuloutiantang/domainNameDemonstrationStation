import{r as i,j as h,L as w,M as x,Q as l,R as c,N as s,bx as k,bX as r}from"./index-B4XSLxXL.js";import{a as y,_ as N}from"./InputGroup-j4sHdP9i.js";import"./use-merged-state-Ys9kvUPE.js";const S={class:"flex flex-col justify-center items-center p-2rem"},b=s("div",{class:"fw-900 text-35px"},"WS示例",-1),B=s("div",{class:"h-1rem"},null,-1),C=s("div",null,"在控制台查看效果",-1),J=s("div",{class:"h-2rem"},null,-1),V=s("div",{class:"h-1rem"},null,-1),$=s("div",{class:"h-1rem"},null,-1),j=s("div",{class:"h-1rem"},null,-1),A={__name:"wsTesting",setup(M){const e=i(null),u=i("");h(()=>{console.log("当前服务器会把接收到的数据原样返回三次")});const _=()=>{e.value&&(e.value.close(),e.value=null),e.value=new WebSocket("ws://nodeapi.kuloutiantang.top/"),e.value.onopen=function(n){console.log(n),console.log("【已连接……】")},e.value.onmessage=function(n){console.log("【收到消息：",f(n.data),"】")},e.value.onclose=function(n){console.log(n),console.log("【连接断开。】")}},d=()=>{e.value?(p(u.value,"events"),u.value=""):console.log("连接已关闭")},v=()=>{e.value&&(e.value.close(),e.value=null)},p=(n,o="events")=>{let t={event:o,data:n};e.value.send(JSON.stringify(t))},f=n=>{try{return JSON.parse(n)}catch{return n}};return(n,o)=>{const t=k,m=N,g=y;return w(),x("div",S,[b,B,C,J,l(t,{onClick:o[0]||(o[0]=a=>_()),class:"w-full",strong:"",type:"success"},{default:c(()=>[r("连接服务器")]),_:1}),V,l(g,null,{default:c(()=>[l(m,{value:u.value,"onUpdate:value":o[1]||(o[1]=a=>u.value=a),placeholder:"消息内容"},null,8,["value"]),l(t,{onClick:o[2]||(o[2]=a=>d()),strong:"",type:"info"},{default:c(()=>[r("发送消息")]),_:1})]),_:1}),$,l(t,{onClick:o[3]||(o[3]=a=>v()),class:"w-full",strong:"",type:"error"},{default:c(()=>[r("断开连接")]),_:1}),j])}}};export{A as default};
