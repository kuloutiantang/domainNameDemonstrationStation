import{P as $,r as k,j as q,bR as A,L as y,M as b,Q as z,R as M,N as t,U as O,W as E,bQ as C,O as L,G as F,S as x,bV as R,bU as U,bx as G}from"./index-CzQ6iPUt.js";import{r as Q,d as j,u as W,n as P,a as I,_ as J,c as K}from"./dayjs.min-DYgyj3Tf.js";import{c as B,g as X}from"./_commonjsHelpers-Cpj98o6Y.js";import{C as Z}from"./index-CyKlR0oi.js";import{u as ee}from"./color-BhNBSdqc.js";var te={exports:{}};(function(D,T){(function(r,n){D.exports=n(Q())})(B,function(r){function n(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var _=n(r),i={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,c){return c==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,c){var l=100*o+c;return l<600?"凌晨":l<900?"早上":l<1100?"上午":l<1300?"中午":l<1800?"下午":"晚上"}};return _.default.locale(i,null,!0),i})})(te);var H={exports:{}};(function(D,T){(function(r,n){D.exports=n()})(B,function(){return function(r,n,_){r=r||{};var i=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(a,m,u,e){return i.fromToBase(a,m,u,e)}_.en.relativeTime=o,i.fromToBase=function(a,m,u,e,d){for(var h,s,f,p=u.$locale().relativeTime||o,g=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],V=g.length,Y=0;Y<V;Y+=1){var v=g[Y];v.d&&(h=e?_(a).diff(u,v.d,!0):u.diff(a,v.d,!0));var w=(r.rounding||Math.round)(Math.abs(h));if(f=h>0,w<=v.r||!v.r){w<=1&&Y>0&&(v=g[Y-1]);var N=p[v.l];d&&(w=d(""+w)),s=typeof N=="string"?N.replace("%d",w):N(w,m,v.l,f);break}}if(m)return s;var S=f?p.future:p.past;return typeof S=="function"?S(s):S.replace("%s",s)},i.to=function(a,m){return c(a,m,this,!0)},i.from=function(a,m){return c(a,m,this)};var l=function(a){return a.$u?_.utc():_()};i.toNow=function(a){return this.to(l(this),a)},i.fromNow=function(a){return this.from(l(this),a)}}})})(H);var oe=H.exports;const ae=X(oe),se={class:"flex flex-row justify-start items-center"},le=t("div",{class:"w-21px"},null,-1),re={key:1,class:"h-full flex justify-center items-center select-none"},ne=t("div",{class:"h-70px"},null,-1),ie={class:"w-1200px flex flex-col justify-start items-center"},ce=t("div",{class:"w-full text-2rem mt-3.5rem mb-1.4rem"},"统计数据",-1),ue={key:0,class:"box w-full flex flex-row justify-start items-center gap-2rem"},de={class:"text-1rem"},me=t("div",{class:"h-0.5rem"},null,-1),_e={class:"text-3rem",style:{color:"var(--var-theme-color)"}},fe=t("div",{class:"w-full text-2rem mt-3.5rem mb-1.4rem"},"统计图表",-1),pe={class:"box w-full flex flex-row justify-start items-center gap-2rem"},he={key:0,class:"boxson"},ve={class:"text-1rem"},ye={key:1,class:"boxson"},xe={class:"text-1rem"},Me={__name:"monitorView",setup(D){const T=$();j.locale("zh-cn"),j.extend(ae);const r=W(),n=ee(),_=k([]),i=k(null),o=k(null),c=k({}),l=k({});q(()=>{!n.beReady&&n.init(7),a()});const a=async()=>{let u=null;await A.get("http://nodeapi.kuloutiantang.top/www/log/monitor/"+window.btoa(window.location.host)).then(e=>{u=e.data.statisticsNumber,Object.keys(e.data.statisticsNumber).forEach(s=>{u[s].value=P(e.data.statisticsNumber[s].value).format("000,0")});let d=[];e.data.statisticsTable.new7table_query.data.map((s,f)=>{d[f]={day:j(s.day).locale("zh-cn").fromNow(),num:+s.num}}),console.log(d),c.value.title=e.data.statisticsTable.new7table_query.name,c.value.options={theme:"classicDark",type:"view",autoFit:!0,data:{value:d,transform:[{type:"rename",day:"日期",num:"人数"}]},encode:{x:"日期",y:"人数"},axis:{x:{title:null,tick:!1,line:!0},y:{title:null,grid:!1,tick:!1,label:!1}},children:[{type:"line",encode:{shape:"smooth"}},{type:"point",tooltip:!1},{type:"text",encode:{x:"日期",y:"人数",text:"人数"},style:{fill:"rgba(230, 237, 243, 0.64)",textAlign:"center",dy:-10},tooltip:!1}],text:{fontSize:"14px"},color:{palette:"greys"}};let h=[];e.data.statisticsTable.all7table_query.data.map((s,f)=>{h[f]={day:j(s.day).locale("zh-cn").fromNow(),num:+s.num}}),l.value.title=e.data.statisticsTable.all7table_query.name,l.value.options={theme:"classicDark",type:"view",autoFit:!0,data:{value:h,transform:[{type:"rename",day:"日期",num:"人数"}]},encode:{x:"日期",y:"人数"},axis:{x:{title:null,tick:!1,line:!0},y:{title:null,grid:!1,tick:!1,label:!1}},children:[{type:"line",encode:{shape:"smooth"}},{type:"point",tooltip:!1},{type:"text",encode:{x:"日期",y:"人数",text:"人数"},style:{fill:"rgba(230, 237, 243, 0.64)",textAlign:"center",dy:-10},tooltip:!1}],text:{fontSize:"14px"},color:{palette:"greys"}}}),_.value=u,m(i.value,c.value.options),m(o.value,l.value.options)},m=(u,e)=>{const d=new Z({container:u});return d.options(e),d.render(),d};return(u,e)=>{const d=G,h=J,s=K,f=I;return y(),b("div",{class:"box-border w-100vw h-100vh overflow-hidden overflow-y-auto flex flex-col justify-start items-center",style:F({"--var-theme-color":x(n).themeColor,"--var-theme-opacity-color":x(n).themeColorOp(.07)})},[z(f,{top:0,"trigger-top":0,class:"box-border bg-theme w-full h-70px flex flex-col justify-center items-center border-1px border-b-solid z-2 <xl:hidden",style:{color:"var(--var-theme-color)"}},{default:M(()=>[z(s,{class:"w-1200px"},{title:M(()=>[t("div",se,[t("div",{onClick:e[0]||(e[0]=p=>x(T).push("/")),class:"cursor-pointer size-35px transition-777 i-solar-home-smile-bold-duotone",style:{color:"var(--var-theme-color)"}}),le,t("div",{onClick:e[1]||(e[1]=p=>x(T).go()),class:"fw-900 text-28px lh-42px cursor-pointer select-none",style:{color:"var(--var-theme-color)"}}," 监控 ")])]),extra:M(()=>[z(h,null,{default:M(()=>[x(r).isLogin?(y(),R(d,{key:0,onClick:e[2]||(e[2]=p=>x(r).logout()),strong:"",type:"error"},{default:M(()=>[U("退出")]),_:1})):C("",!0),x(r).isLogin?(y(),b("div",re,[t("span",null,L(x(r).user.email),1)])):C("",!0)]),_:1})]),_:1})]),_:1}),ne,t("div",ie,[ce,_.value?(y(),b("div",ue,[(y(!0),b(O,null,E(_.value,(p,g)=>(y(),b("div",{key:g,class:"boxson rounded-0.5rem p-1.5rem",style:{"background-color":"var(--var-theme-opacity-color)"}},[t("div",de,L(p.name),1),me,t("div",_e,L(p.value),1)]))),128))])):C("",!0),fe,t("div",pe,[c.value?(y(),b("div",he,[t("div",ve,L(c.value.title),1),t("div",{ref_key:"table1Container",ref:i,class:"w-384px h-216px"},null,512)])):C("",!0),l.value?(y(),b("div",ye,[t("div",xe,L(l.value.title),1),t("div",{ref_key:"table2Container",ref:o,class:"w-384px h-216px"},null,512)])):C("",!0)])])],4)}}};export{Me as default};
